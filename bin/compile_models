#!/usr/bin/env jruby
require 'rubygems'
require 'rdb4o'

if ARGV.empty?
  puts "USAGE: compile_models [path]"
  exit
end

ARGV.each do |file|
  next unless file =~ /.rb$/
  
  puts "reading #{file}"
  require file

  while Rdb4o::ModelGenerator.classes.size > 0
    cls = Rdb4o::ModelGenerator.classes.shift
    cls.generate!(File.dirname(file))
    cls.compile!(File.dirname(file))
  end
end

